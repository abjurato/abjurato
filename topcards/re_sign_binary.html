<!DOCTYPE html><html lang="en"><head><link rel="stylesheet" href="https://abjurato.github.io/general.css" type="text/css"/><title>re-sign decrypted binary (with Apple Developer account)</title><meta name="twitter:title" content="re-sign decrypted binary (with Apple Developer account)"/><meta name="og:title" content="re-sign decrypted binary (with Apple Developer account)"/><meta name="twitter:image" content="https://abjurato.github.io/images/1.jpeg"/><meta name="og:image" content="https://abjurato.github.io/images/1.jpeg"/><meta name="twitter:card" content="summary"/><meta name="description" content="re-sign decrypted binary (with Apple Developer account)"/><meta name="twitter:description" content="re-sign decrypted binary (with Apple Developer account)"/><meta name="og:description" content="re-sign decrypted binary (with Apple Developer account)"/><link rel="canonical" href="https://abjurato.github.io/topcards/re_sign_binary.html"/><meta name="twitter:url" content="https://abjurato.github.io/topcards/re_sign_binary.html"/><meta name="og:url" content="https://abjurato.github.io/topcards/re_sign_binary.html"/></head><body><a href="https://abjurato.github.io/" class="comment">(lldb) thread step-out</a><h1>Re-sign binary (with Apple Developer account)</h1><h2>macOS side</h2><p><ol><li>Rename your decrypted <span class="inlinecode">&lt;NAME&gt;.ipa</span> into <span class="inlinecode">&lt;NAME&gt;.zip</span>, unarchive, open</li><li>Change bundleId in <span class="inlinecode">Payload/&lt;NAME&gt;.app/Info.plist</span> to something matching your Apple Developer account</li><li>Minimal <span class="inlinecode">&lt;whatever&gt;.entitlements</span> should have following info:<script src="https://gist.github.com/abjurato/ce9afee76e783ebb6b767785635d31d1.js"></script></li><li>Create app with same bundle id and all the additional capabilities you've included in entitlements xml on <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer website</a></li><li>Create provisioning profile for your app id, your device, your developer account on <a href="https://developer.apple.com/account/ios/profile/production">Apple Developer website</a>, download it and rename to <span class="inlinecode">embedded.mobileprovision</span></li><li>Check that you have correct signing identity and re-sign the binary<script src="https://gist.github.com/abjurato/5767d2195912756433b08fa958aa4ac9.js"></script></li><li>Pack new ipa with this binary:<span class="snippet">$ zip -qr &lt;NAME2&gt;.ipa Payload/</span></li></ol></p><h2>iOS side</h2><p>On a jaibroken device you can modify entitlements and simulate codesigning using ldid utility<script src="https://gist.github.com/abjurato/202b53df3e7184210368045f57a043ee.js"></script></p><br/><h2>Sources</h2><p><a href="https://www.objc.io/issues/17-security/inside-code-signing/">[1] Theory about codesigning</a></p><p><a href="https://coderwall.com/p/dgdgeq/how-to-re-sign-ios-builds">[2] How to re-sign iOS builds</a></p><p><a href="https://www.vantagepoint.sg/blog/85-patching-and-re-signing-ios-apps">[3] Patching and Re-Signing iOS Apps</a></p><br/><div class="comment">Jan 2020, iOS 12.4</div></body></html>