<!DOCTYPE html><html><head><link rel="stylesheet" href="https://abjurato.github.io/general.css" type="text/css"/><title>Back-port .fullScreenCover to SwiftUI 1.0</title><meta name="twitter:title" content="Back-port .fullScreenCover to SwiftUI 1.0"/><meta name="og:title" content="Back-port .fullScreenCover to SwiftUI 1.0"/><meta name="twitter:image" content="https://abjurato.github.io/images/0.jpeg"/><meta name="og:image" content="https://abjurato.github.io/images/0.jpeg"/><meta name="twitter:card" content="summary"/><meta name="description" content="Back-port .fullScreenCover to SwiftUI 1.0"/><meta name="twitter:description" content="Back-port .fullScreenCover to SwiftUI 1.0"/><meta name="og:description" content="Back-port .fullScreenCover to SwiftUI 1.0"/><link rel="canonical" href="https://abjurato.github.io/stories/fullScreenCover.html"/><meta name="twitter:url" content="https://abjurato.github.io/stories/fullScreenCover.html"/><meta name="og:url" content="https://abjurato.github.io/stories/fullScreenCover.html"/></head><body class="comment"><a href="https://abjurato.github.io/">(lldb) thread step-out</a><h1>Back-port .fullScreenCover to SwiftUI 1.0</h1><h2>Modal presentation in SwiftUI</h2><p>SwiftUI 2.0 presented on WWDC20 brings us a lot of small improvements and additions to the APIs. In iOS 13 we already had API to open views modally in a bottom-rising sheet, but whatever the contents presentation mode was, there was no way to present it full screen.</p><p>Real-life example: early versions of our app had to present Camera of <span class="inlinecode">UIImagePickerController</span> in such sheet which looked very stupid.</p><p>One of the new APIs adds an ability to open views modally - <span class="inlinecode">fullScreenCover(isPresented:onDismiss:content:):</span></p><div class="screenshot"><img src="https://abjurato.github.io/images/fullScreenCover_01.png"/></div><p>Unfortunately, this view modifier is available only on iOS 14 and higher. </p><h2>How can it be back ported to iOS 13?</h2><p>Short answer: with help of UIKit and thanks to its interoperability with SwiftUI. <ol><li>As one can remember, UIKit is managing view hierarchy by means of <span class="inlinecode">UIViewControllers</span> which can serve as presenters to each other. In a simple cases presentation transition (animation and which part of the screen the presented controller’s view will take) depends on presenting controller’s <span class="inlinecode">.presentationMode</span>;</li><li>SwiftUI can wrap <span class="inlinecode">UIViewControllers</span> into <span class="inlinecode">UIViewControllerRepresentable</span> views and embed into hierarchy like any other View. Such controllers have 2 important methods (<span class="inlinecode">makeUIViewController</span>, <span class="inlinecode">dismantleUIViewController</span>) which will help us manage presentation process</li></ol></p><p>So, generally the plan is:<ol><li>1. Add invisible <span class="inlinecode">UIViewController</span> to parent SwiftUI view</li><li>2. Provide this controller with a child SwitUI view that needs to be presented in a full screen modal</li><li>3. When this controller appears in the hierarchy, it will present the child using UIKit APIs</li><li>4. When the child should be dismissed, the controller should be removed from the hierarchy</li></ol><div class="screenshot"><img src="https://abjurato.github.io/images/fullScreenCover_02.png"/></div></p><p>Production code will be more complex, but for the sake of simplicity let’s omit edge cases:</p><div class="gist"><script src="https://gist.github.com/abjurato/386c32affe61eabab1ff4f5bd715ae89.js"></script></div><p>And empowered by the beauty of <span class="inlinecode">ViewModifiers</span> we can keep code almost the same! More about approaches to backwards compatibility in SwiftUI: https://swiftui-lab.com/backward-compatibility/</p><div class="screenshot"><img src="https://abjurato.github.io/images/fullScreenCover_03.png"/></div><br/><div class="comment">27/09/2020</div></body></html>